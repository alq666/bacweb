{% extends "base.html" %}
{% block head %}
	<script type="text/javascript" src="{{ static_url("jquery.dataTables.min.js") }}"></script>
{% end %}

{% block body %}
	<h1>Loaded Media - {{ len(loaded) }} volume(s)</h1>
	<table id="loaded_media">
		<thead>
			<tr>
				<th>Volume Name</th>
				<th>Pool</th>
				<th>Slot</th>
				<th>Last Written</th>
				<th>Status</th>
				<th>Retention (days)</th>
			</tr>
		</thead>
		<tbody>
		{% for medium in loaded %}
			{% if medium.inchanger %}
			<tr>
				<td class="media">
					<a href="/media/{{ medium.name }}">{{ medium.name }}</a>
				</td>
				{% for attr in ("pool", "slot", "last_written", "status", "retention") %}
				<td class="media">
  					{{ getattr(medium, attr) }}
				</td>
				{% end %}
			</tr>
			{% end %}
		{% end %}
		</tbody>
	</table>

	<h1>Missing Media - {{ len(missing) }} volume(s)</h1>
	<table id="missing_media">
		<thead>
			<tr>
				<th>Volume Name</th>
				<th>Pool</th>
				<th>Last Written</th>
				<th>Status</th>
				<th>Retention (days)</th>
			</tr>
		</thead>
		<tbody>
		{% for medium in missing %}
			<tr>
				<td class="media">
					<a href="/media/{{ medium.name }}">{{ medium.name }}</a>
				</td>
				{% for attr in ("pool", "last_written", "status", "retention") %}
				<td class="media">
  					{{ getattr(medium, attr) }}
				</td>
				{% end %}
			</tr>
		{% end %}
		</tbody>
	</table>
	
	<script type="text/javascript">
	$(document).ready(function() {
		lTable = $('#loaded_media').dataTable({
			"bJQueryUI": true,
			"sPaginationType": "full_numbers"
		});
		mTable = $('#missing_media').dataTable({
			"bJQueryUI": true,
			"sPaginationType": "full_numbers"
		});
	} );
	</script>
{% end %}
